<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>üí∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f7fa;
      color: #333;
      max-width: 600px;
      margin: 2rem auto;
      padding: 20px;
    }
    h2 {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-bottom: 5px;
    }
    input {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
    }
    button {
      background-color: #0066cc;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background-color: #005bb5;
    }
    .message {
      margin-top: 20px;
      padding: 10px;
      border-radius: 5px;
    }
    .success {
      background-color: #e5fbe5;
      color: #207a20;
    }
    .error {
      background-color: #ffe5e5;
      color: #c40000;
    }
  </style>
</head>
<body>
  <h2>üí∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
  <div class="form-group">
    <label for="user_id">ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
    <input type="text" id="user_id" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
  </div>
  <div class="form-group">
    <label for="amount">–°—É–º–º–∞ (—Ç–µ–Ω–≥–µ)</label>
    <input type="number" id="amount" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
  </div>
  <button onclick="updateBalance()">–û–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
  <div id="message" class="message"></div>

  <script>
    const API = "https://royal-test.duckdns.org";

    async function updateBalance() {
      const userId = document.getElementById("user_id").value;
      const amount = parseInt(document.getElementById("amount").value);
      const messageDiv = document.getElementById("message");

      messageDiv.innerHTML = "";

      if (!userId || isNaN(amount)) {
        messageDiv.innerHTML = `<div class="error">‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.</div>`;
        return;
      }

      try {
        const response = await fetch(`${API}/balance/${userId}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ amount })
        });

        const data = await response.json();

        if (!response.ok) {
          const msg = data.detail || "–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞";
          messageDiv.innerHTML = `<div class="error">‚ùå ${msg}</div>`;
          return;
        }

        messageDiv.innerHTML = `<div class="success">‚úÖ –ë–∞–ª–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω.</div>`;

      } catch (err) {
        messageDiv.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${err.message}</div>`;
      }
    }
  </script>
</body>
</html> 